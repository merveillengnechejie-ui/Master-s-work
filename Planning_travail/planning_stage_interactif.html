<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning de Stage - BODIPY</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .progress-overview {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .progress-bar-container {
            background: #e9ecef;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .weeks-container {
            padding: 30px;
        }
        
        .week-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            margin-bottom: 25px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .week-card:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .week-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .week-title {
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .week-progress {
            background: rgba(255,255,255,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .week-content {
            padding: 20px;
        }
        
        .task-list {
            margin-bottom: 20px;
        }
        
        .task-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: background 0.2s;
        }
        
        .task-item:hover {
            background: #e9ecef;
        }
        
        .task-item.completed {
            opacity: 0.7;
            text-decoration: line-through;
        }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .task-text {
            flex: 1;
            line-height: 1.6;
        }
        
        .notes-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
        }
        
        .notes-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            display: block;
            font-size: 1.1em;
        }
        
        .notes-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        .notes-textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .phase-badge {
            display: inline-block;
            padding: 5px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            font-size: 0.85em;
            margin-left: 10px;
        }
        
        .save-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 30px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            transition: transform 0.2s;
        }
        
        .save-btn:hover {
            transform: scale(1.05);
        }
        
        .toggle-icon {
            transition: transform 0.3s;
        }
        
        .week-card.collapsed .week-content {
            display: none;
        }
        
        .week-card.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Planning de Stage - Optimisation BODIPY</h1>
            <p>Suivi hebdomadaire sur 14 semaines</p>
        </div>
        
        <div class="progress-overview">
            <h3>Progression Globale</h3>
            <div class="progress-bar-container">
                <div class="progress-bar" id="globalProgress">0%</div>
            </div>
        </div>
        
        <div class="weeks-container" id="weeksContainer"></div>
        
        <button class="save-btn" onclick="saveProgress()">üíæ Sauvegarder la Progression</button>
    </div>

    <script>
        const weeksData = [
            {
                week: 1,
                title: "Formation et Bibliographie",
                phase: "PHASE 1: IMMERSION",
                tasks: [
                    "Prise en main Linux/SLURM",
                    "Installation/configuration ORCA 6.1",
                    "Acc√®s au cluster HPC",
                    "Lecture : TNBC, fen√™tre th√©rapeutique (6h)",
                    "Lecture : BODIPY photophysique (6h)",
                    "Lecture : DFT/ADC(2)/OO-DFT (6h)",
                    "Cr√©er notes de lecture et liste des 10 articles cl√©s"
                ]
            },
            {
                week: 2,
                title: "Synth√®se et S√©lection des Prototypes",
                phase: "PHASE 1: IMMERSION",
                tasks: [
                    "R√©daction synth√®se bibliographique (4h)",
                    "Identification des modifications chimiques cl√©s (4h)",
                    "S√©lection des 3 prototypes (2h)",
                    "Justification du design de chaque prototype (2h)",
                    "Review avec encadrant (1h)",
                    "Finaliser document synth√®se (2-3 pages)"
                ]
            },
            {
                week: 3,
                title: "Construction Mol√©culaire",
                phase: "PHASE 1: IMMERSION",
                tasks: [
                    "Construire proto-A dans Avogadro (3h)",
                    "Construire proto-B dans Avogadro (3h)",
                    "Construire proto-C dans Avogadro (3h)",
                    "Pr√©-optimisation GFN2-xTB (3h calcul + 1h validation)",
                    "Validation des g√©om√©tries (2h)",
                    "G√©n√©rer 3 fichiers .xyz valid√©s"
                ]
            },
            {
                week: 4,
                title: "S0 Optimisations",
                phase: "PHASE 2: CALCULS FONDAMENTAUX",
                tasks: [
                    "Proto-A: submit S0_gas_opt.inp",
                    "Proto-B: submit S0_gas_opt.inp",
                    "Proto-C: submit S0_gas_opt.inp",
                    "Proto-A: submit S0_water_opt.inp",
                    "Proto-B: submit S0_water_opt.inp",
                    "Proto-C: submit S0_water_opt.inp",
                    "Validation g√©om√©tries (fr√©quences imaginaires)"
                ]
            },
            {
                week: 5,
                title: "Excitations Verticales - Calculs ADC(2)",
                phase: "PHASE 2: CALCULS FONDAMENTAUX",
                tasks: [
                    "Proto-A: ADC2_vertical.inp submit",
                    "Proto-B: ADC2_vertical.inp submit",
                    "Proto-C: ADC2_vertical.inp submit",
                    "Monitoring des calculs",
                    "V√©rification des convergences"
                ]
            },
            {
                week: 6,
                title: "Excitations Verticales - Extraction",
                phase: "PHASE 2: CALCULS FONDAMENTAUX",
                tasks: [
                    "Extraction Œª_max des 3 prototypes",
                    "Compilation des spectres",
                    "Benchmarking vs litt√©rature",
                    "Validation des m√©thodes",
                    "Cr√©er graphiques comparatifs",
                    "Tableau des propri√©t√©s d'absorption"
                ]
            },
            {
                week: 7,
                title: "√âtats Excit√©s - T1 Optimisations",
                phase: "PHASE 2: CALCULS FONDAMENTAUX",
                tasks: [
                    "Proto-A: submit T1_water_opt.inp",
                    "Proto-B: submit T1_water_opt.inp",
                    "Proto-C: submit T1_water_opt.inp",
                    "Extraction E_T1",
                    "Premiers calculs ŒîE_ST"
                ]
            },
            {
                week: 8,
                title: "√âtats Excit√©s - S1 Optimisations",
                phase: "PHASE 2: CALCULS FONDAMENTAUX",
                tasks: [
                    "Proto-A: submit S1_water_opt.inp",
                    "Proto-B: submit S1_water_opt.inp",
                    "Proto-C: submit S1_water_opt.inp",
                    "Monitoring et troubleshooting",
                    "Adapter les strat√©gies si n√©cessaire",
                    "G√©n√©rer tableau ŒîE_ST = E_S1 - E_T1"
                ]
            },
            {
                week: 9,
                title: "Couplage Spin-Orbite (SOC)",
                phase: "PHASE 3: ANALYSE",
                tasks: [
                    "Choisir m√©thode: FIC-NEVPT2 ou TD-DFT",
                    "Proto-A: submit SOC calculations",
                    "Proto-B: submit SOC calculations",
                    "Proto-C: submit SOC calculations",
                    "Extraction des matrices SOC",
                    "Benchmark SOC values vs literature"
                ]
            },
            {
                week: 10,
                title: "Analyse Post-Traitement et Scoring",
                phase: "PHASE 3: ANALYSE",
                tasks: [
                    "Calculer charges Mulliken/Hirshfeld",
                    "G√©n√©rer cartes MEP (Multiwfn)",
                    "Valider localisation charge TPP+",
                    "Compilation r√©sultats complets",
                    "Scoring des 3 prototypes",
                    "Identifier meilleur candidat"
                ]
            },
            {
                week: 11,
                title: "Synth√®se R√©sultats et Perspectives",
                phase: "PHASE 3: ANALYSE",
                tasks: [
                    "Double-check tous les r√©sultats",
                    "G√©n√©rer graphiques finaux haute qualit√©",
                    "Pr√©parer diagrammes pour rapport",
                    "Brainstorm perspectives futures",
                    "Strat√©gies nanom√©decine",
                    "Document Perspectives (2-3 pages)"
                ]
            },
            {
                week: 12,
                title: "R√©daction du Rapport (Draft)",
                phase: "PHASE 4: SYNTH√àSE",
                tasks: [
                    "Introduction (3-4 pages)",
                    "√âtat de l'Art (5-7 pages)",
                    "Th√©orie et M√©thodes (8-10 pages)",
                    "R√©sultats - partie 1 (5 pages)",
                    "Commencer Discussion"
                ]
            },
            {
                week: 13,
                title: "Finalisation Rapport + Pr√©paration Soutenance",
                phase: "PHASE 4: SYNTH√àSE",
                tasks: [
                    "R√©sultats - finalisation (10-12 pages)",
                    "Discussion compl√®te (5-8 pages)",
                    "Perspectives + Conclusion (3-4 pages)",
                    "Review et corrections",
                    "Cr√©er diapositives (15-20 slides)",
                    "Pr√©parer discours et r√©p√©tition"
                ]
            },
            {
                week: 14,
                title: "Soutenance et Finalisation",
                phase: "PHASE 4: SYNTH√àSE",
                tasks: [
                    "R√©union de relecture",
                    "Corrections finales du rapport",
                    "Derni√®re r√©p√©tition",
                    "SOUTENANCE - Pr√©sentation orale",
                    "D√©fense questions",
                    "Int√©grer feedbacks du jury",
                    "D√©p√¥t du rapport d√©finitif"
                ]
            }
        ];

        function initializePlanning() {
            const container = document.getElementById('weeksContainer');
            
            weeksData.forEach(week => {
                const weekCard = document.createElement('div');
                weekCard.className = 'week-card';
                weekCard.innerHTML = `
                    <div class="week-header" onclick="toggleWeek(${week.week})">
                        <div>
                            <div class="week-title">
                                Semaine ${week.week}: ${week.title}
                                <span class="phase-badge">${week.phase}</span>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div class="week-progress" id="progress-${week.week}">0/${week.tasks.length}</div>
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                    </div>
                    <div class="week-content">
                        <div class="task-list" id="tasks-${week.week}">
                            ${week.tasks.map((task, index) => `
                                <div class="task-item" id="task-${week.week}-${index}">
                                    <input type="checkbox" class="task-checkbox" 
                                           onchange="updateProgress(${week.week})" 
                                           id="checkbox-${week.week}-${index}">
                                    <span class="task-text">${task}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="notes-section">
                            <label class="notes-label">üìù Notes et Apprentissages de la Semaine ${week.week}:</label>
                            <textarea class="notes-textarea" 
                                      id="notes-${week.week}" 
                                      placeholder="Notez ici ce que vous avez appris, les difficult√©s rencontr√©es, les r√©sultats obtenus, les questions √† approfondir..."></textarea>
                        </div>
                    </div>
                `;
                container.appendChild(weekCard);
            });
            
            loadProgress();
            updateAllProgress();
        }

        function toggleWeek(weekNum) {
            const card = document.querySelector(`#tasks-${weekNum}`).closest('.week-card');
            card.classList.toggle('collapsed');
        }

        function updateProgress(weekNum) {
            const week = weeksData.find(w => w.week === weekNum);
            const checkboxes = document.querySelectorAll(`[id^="checkbox-${weekNum}-"]`);
            const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
            
            document.getElementById(`progress-${weekNum}`).textContent = `${completed}/${week.tasks.length}`;
            
            checkboxes.forEach((checkbox, index) => {
                const taskItem = document.getElementById(`task-${weekNum}-${index}`);
                if (checkbox.checked) {
                    taskItem.classList.add('completed');
                } else {
                    taskItem.classList.remove('completed');
                }
            });
            
            updateGlobalProgress();
        }

        function updateAllProgress() {
            weeksData.forEach(week => updateProgress(week.week));
        }

        function updateGlobalProgress() {
            let totalTasks = 0;
            let completedTasks = 0;
            
            weeksData.forEach(week => {
                const checkboxes = document.querySelectorAll(`[id^="checkbox-${week.week}-"]`);
                totalTasks += checkboxes.length;
                completedTasks += Array.from(checkboxes).filter(cb => cb.checked).length;
            });
            
            const percentage = Math.round((completedTasks / totalTasks) * 100);
            const progressBar = document.getElementById('globalProgress');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
        }

        function saveProgress() {
            const data = {
                tasks: {},
                notes: {}
            };
            
            weeksData.forEach(week => {
                const checkboxes = document.querySelectorAll(`[id^="checkbox-${week.week}-"]`);
                data.tasks[week.week] = Array.from(checkboxes).map(cb => cb.checked);
                data.notes[week.week] = document.getElementById(`notes-${week.week}`).value;
            });
            
            localStorage.setItem('stagePlanning', JSON.stringify(data));
            alert('‚úÖ Progression sauvegard√©e avec succ√®s !');
        }

        function loadProgress() {
            const saved = localStorage.getItem('stagePlanning');
            if (!saved) return;
            
            const data = JSON.parse(saved);
            
            weeksData.forEach(week => {
                if (data.tasks[week.week]) {
                    const checkboxes = document.querySelectorAll(`[id^="checkbox-${week.week}-"]`);
                    checkboxes.forEach((cb, index) => {
                        cb.checked = data.tasks[week.week][index] || false;
                    });
                }
                
                if (data.notes[week.week]) {
                    document.getElementById(`notes-${week.week}`).value = data.notes[week.week];
                }
            });
        }

        // Auto-save every 2 minutes
        setInterval(saveProgress, 120000);

        // Initialize on load
        window.onload = initializePlanning;
    </script>
</body>
</html>